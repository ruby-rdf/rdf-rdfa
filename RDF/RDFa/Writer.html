<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: RDF::RDFa::Writer
  
    &mdash; RDFa reader/writer for RDF.rb.
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "RDF::RDFa::Writer";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (W)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span>
     &raquo; 
    <span class="title">Writer</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: RDF::RDFa::Writer
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Writer</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Writer</li>
          
            <li class="next">RDF::RDFa::Writer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Util::Logger</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rdf/rdfa/writer.rb<span class="defines">,<br />
  lib/rdf/rdfa/writer/haml_templates.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An RDFa 1.1 serialiser in Ruby. The RDFa serializer makes use of Haml templates, allowing runtime-replacement with alternate templates. Note, however, that templates should be checked against the W3C test suite to ensure that valid RDFa is emitted.</p>

<p>Note that the natural interface is to write a whole graph at a time. Writing statements or Triples will create a graph to add them to and then serialize the graph.</p>

<p>The writer will add prefix definitions, and use them for creating @prefix definitions, and minting CURIEs</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Obtaining a RDFa writer class</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='symbol'>:html</span><span class='rparen'>)</span>          <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span><span class='op'>::</span><span class='const'>Writer</span>
<span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='label'>file_name:</span>      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='label'>file_extension:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='label'>content_type:</span>   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/xhtml+xml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_for'>for</span><span class='lparen'>(</span><span class='label'>content_type:</span>   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Serializing RDF graph into an XHTML+RDFa file</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span><span class='op'>::</span><span class='const'>Write</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_writer'>writer</span><span class='op'>|</span>
  <span class='id identifier rubyid_writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_graph'>graph</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Serializing RDF statements into an XHTML+RDFa file</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_writer'>writer</span><span class='op'>|</span>
  <span class='id identifier rubyid_graph'>graph</span><span class='period'>.</span><span class='id identifier rubyid_each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_statement'>statement</span><span class='op'>|</span>
    <span class='id identifier rubyid_writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Serializing RDF statements into an XHTML+RDFa string</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_writer'>writer</span><span class='op'>|</span>
  <span class='id identifier rubyid_graph'>graph</span><span class='period'>.</span><span class='id identifier rubyid_each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_statement'>statement</span><span class='op'>|</span>
    <span class='id identifier rubyid_writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Creating @base and @prefix definitions in output</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='lparen'>(</span><span class='label'>base_uri:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.com/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>prefixes:</span> <span class='lbrace'>{</span>
    <span class='label'>foaf:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://xmlns.com/foaf/0.1/</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_writer'>writer</span><span class='op'>|</span>
  <span class='id identifier rubyid_graph'>graph</span><span class='period'>.</span><span class='id identifier rubyid_each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_statement'>statement</span><span class='op'>|</span>
    <span class='id identifier rubyid_writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p><a href="https://greggkellogg.net/">Gregg Kellogg</a></p>
</div>
      
    </li>
  
</ul>

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="HAML_OPTIONS-constant" class="">HAML_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>format:</span> <span class='symbol'>:xhtml</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="BASE_HAML-constant" class="">BASE_HAML =
          <div class="docstring">
  <div class="discussion">
    
<p>The default set of HAML templates used for RDFa code generation</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
 <span class='label'>identifier:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>base</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='comment'># Document
</span>  <span class='comment'># Locals: language, title, prefix, base, subjects
</span>  <span class='comment'># Yield: subjects.each
</span>  <span class='label'>doc:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    !!! XML
    !!! 5
    %html{**{xmlns: &quot;http://www.w3.org/1999/xhtml&quot;, lang: lang, prefix: prefix}.compact}
      - if base || title
        %head
          - if base
            %base{**{href: base}.compact}
          - if title
            %title= title
      %body
        - subjects.map do |subject|
          != yield(subject)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for non-leaf resources
</span>  <span class='comment'># Note that @about may be omitted for Nodes that are not referenced
</span>  <span class='comment'>#
</span>  <span class='comment'># If _rel_ and _resource_ are not nil, the tag will be written relative
</span>  <span class='comment'># to a previous subject. If _element_ is :li, the tag will be written
</span>  <span class='comment'># with &lt;li&gt; instead of &lt;div&gt;.
</span>  <span class='comment'>#
</span>  <span class='comment'># Locals: subject, typeof, predicates, rel, element, inlist
</span>  <span class='comment'># Yield: predicates.each
</span>  <span class='label'>subject:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if element == :li
      %li{**{rel: rel, resource: (about || resource), typeof: typeof, inlist: inlist}.compact}
        - if typeof
          %span.type!= typeof
        - predicates.each do |predicate|
          != yield(predicate)
    - else
      %div{**{rel: rel, resource: (about || resource), typeof: typeof, inlist: inlist}.compact}
        - if typeof
          %span.type!= typeof
        - predicates.each do |predicate|
          != yield(predicate)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for single-valued properties
</span>  <span class='comment'># Locals: predicate, object, inlist
</span>  <span class='comment'># Yields: object
</span>  <span class='comment'># If nil is returned, render as a leaf
</span>  <span class='comment'># Otherwise, render result
</span>  <span class='label'>property_value:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if heading_predicates.include?(predicate) &amp;&amp; object.literal?
      %h1{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
    - else
      %div.property
        %span.label
          = get_predicate_name(predicate)
        - if res = yield(object)
          != res
        - elsif get_curie(object) == &#39;rdf:nil&#39;
          %span{rel: get_curie(predicate), inlist: &#39;&#39;}
        - elsif object.node?
          %span{**{property: get_curie(predicate), resource: get_curie(object), inlist: inlist}.compact}= get_curie(object)
        - elsif object.uri?
          %a{**{property: get_curie(predicate), href: object.to_s, inlist: inlist}.compact}= object.to_s
        - elsif object.datatype == RDF.XMLLiteral
          %span{**{property: get_curie(predicate), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}&lt;!= get_value(object)
        - else
          %span{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for multi-valued properties
</span>  <span class='comment'># Locals: predicate, :objects, :inlist
</span>  <span class='comment'># Yields: object for leaf resource rendering
</span>  <span class='label'>property_values:</span>  <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    %div.property
      %span.label
        = get_predicate_name(predicate)
      %ul
        - objects.each do |object|
          - if res = yield(object)
            != res
          - elsif object.node?
            %li{**{property: get_curie(predicate), resource: get_curie(object), inlist: inlist}.compact}= get_curie(object)
          - elsif object.uri?
            %li
              %a{**{property: get_curie(predicate), href: object.to_s, inlist: inlist}.compact}= object.to_s
          - elsif object.datatype == RDF.XMLLiteral
            %li{**{property: get_curie(predicate), lang: get_lang(object), datatype: get_curie(object.datatype), inlist: inlist}.compact}&lt;!= get_value(object)
          - else
            %li{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="MIN_HAML-constant" class="">MIN_HAML =
          <div class="docstring">
  <div class="discussion">
    
<p>An alternative, minimal HAML template for RDFa code generation. This version does not perform recursive object generation and does not attempt to create human readable output.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>identifier:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>min</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='comment'># Document
</span>  <span class='comment'># Locals: language, title, prefix, base, subjects
</span>  <span class='comment'># Yield: subjects.each
</span>  <span class='label'>doc:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    !!! XML
    !!! 5
    %html{**{xmlns: &quot;http://www.w3.org/1999/xhtml&quot;, lang: lang, prefix: prefix}.compact}
      - if base
        %head
          %base{*{href: base}.compact}
      %body
        - subjects.each do |subject|
          != yield(subject)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for non-leaf resources
</span>  <span class='comment'># Note that @about may be omitted for Nodes that are not referenced
</span>  <span class='comment'>#
</span>  <span class='comment'># Locals: about, typeof, predicates, :inlist
</span>  <span class='comment'># Yield: predicates.each
</span>  <span class='label'>subject:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    %div{**{rel: rel, resource: (about || resource), typeof: typeof}.compact}
      - predicates.each do |predicate|
        != yield(predicate)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for single-valued properties.
</span>  <span class='comment'># This version does not perform a recursive call, and renders all objects as leafs.
</span>  <span class='comment'># Locals: predicate, object, inlist
</span>  <span class='comment'># Yields: object
</span>  <span class='comment'># If nil is returned, render as a leaf
</span>  <span class='comment'># Otherwise, render result
</span>  <span class='label'>property_value:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
  - if res = yield(object)
    != res
  - elsif get_curie(object) == &#39;rdf:nil&#39;
    %span{rel: get_curie(predicate), inlist: &#39;&#39;}
  - elsif object.node?
    %span{**{property: get_curie(predicate), resource: get_curie(object), inlist: inlist}.compact}= get_curie(object)
  - elsif object.uri?
    %a{**{property: get_curie(predicate), href: object.to_s, inlist: inlist}.compact}= object.to_s
  - elsif object.datatype == RDF.XMLLiteral
    %span{**{property: get_curie(predicate), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}&lt;!= get_value(object)
  - else
    %span{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="DISTILLER_HAML-constant" class="">DISTILLER_HAML =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>identifier:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>distiller</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='comment'># Document
</span>  <span class='comment'># Locals: language, title, prefix, base, subjects
</span>  <span class='comment'># Yield: subjects.each
</span>  <span class='label'>doc:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    !!! XML
    !!! 5
    %html{**{xmlns: &quot;http://www.w3.org/1999/xhtml&quot;, lang: lang, prefix: prefix}.compact}
      - if base || title
        %head
          - if base
            %base{href: base}
          - if title
            %title= title
          %link{rel: &quot;stylesheet&quot;, href: &quot;http://rdf.greggkellogg.net/css/distiller.css&quot;, type: &quot;text/css&quot;}
          %script{src: &quot;https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js&quot;, type: &quot;text/javascript&quot;}
          %script{src: &quot;http://rdf.greggkellogg.net/js/distiller.js&quot;, type: &quot;text/javascript&quot;}
      %body
        - if base
          %p= &quot;RDFa serialization URI base: &amp;lt;#{base}&amp;gt;&quot;
        - subjects.each do |subject|
          != yield(subject)
        %footer
          %p= &quot;Written by &lt;a href=&#39;https://rubygems.org/gems/rdf-rdfa&#39;&gt;RDF::RDFa&lt;/a&gt; version #{RDF::RDFa::VERSION}&quot;
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for non-leaf resources
</span>  <span class='comment'># Note that @about may be omitted for Nodes that are not referenced
</span>  <span class='comment'>#
</span>  <span class='comment'># If _rel_ and _resource_ are not nil, the tag will be written relative
</span>  <span class='comment'># to a previous subject. If _element_ is :li, the tag will be written
</span>  <span class='comment'># with &lt;li&gt; instead of &lt;div&gt;.
</span>  <span class='comment'>#
</span>  <span class='comment'># Note that @rel and @resource can be used together, or @about and @typeof, but
</span>  <span class='comment'># not both.
</span>  <span class='comment'>#
</span>  <span class='comment'># Locals: subject, typeof, predicates, rel, element, inlist
</span>  <span class='comment'># Yield: predicates.each
</span>  <span class='label'>subject:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if element == :li
      %li{**{rel: rel, resource: (about || resource), typeof: typeof, inlist: inlist}.compact}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel
      %td{**{rel: rel, resource: (about || resource), typeof: typeof, inlist: inlist}.compact}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
    - else
      %div{**{resource: (about || resource), typeof: typeof, inlist: inlist}.compact}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for single-valued properties
</span>  <span class='comment'># Locals: predicate, object, inlist
</span>  <span class='comment'># Yields: object
</span>  <span class='comment'># If nil is returned, render as a leaf
</span>  <span class='comment'># Otherwise, render result
</span>  <span class='label'>property_value:</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if heading_predicates.include?(predicate) &amp;&amp; object.literal?
      %h1{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
    - else
      %tr.property
        %td.label
          = get_predicate_name(predicate)
        - if res = yield(object)
          != res
        - elsif get_curie(object) == &#39;rdf:nil&#39;
          %td{rel: get_curie(predicate), inlist: &#39;&#39;}= &quot;Empty&quot;
        - elsif object.node?
          %td{**{property: get_curie(predicate), resource: get_curie(object), inlist: inlist}.compact}= get_curie(object)
        - elsif object.uri?
          %td
            %a{**{property: get_curie(predicate), href: object.to_s, inlist: inlist}.compact}= object.to_s
        - elsif object.datatype == RDF.XMLLiteral
          %td{**{property: get_curie(predicate), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}&lt;!= get_value(object)
        - else
          %td{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for multi-valued properties
</span>  <span class='comment'># Locals: predicate, objects, inliste
</span>  <span class='comment'># Yields: object for leaf resource rendering
</span>  <span class='label'>property_values:</span>  <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    %tr.property
      %td.label
        = get_predicate_name(predicate)
      %td
        %ul
          - objects.each do |object|
            - if res = yield(object)
              != res
            - elsif object.node?
              %li{**{property: get_curie(predicate), resource: get_curie(object), inlist: inlist}.compact}= get_curie(object)
            - elsif object.uri?
              %li
                %a{**{property: get_curie(predicate), href: object.to_s, inlist: inlist}.compact}= object.to_s
            - elsif object.datatype == RDF.XMLLiteral
              %li{**{property: get_curie(predicate), lang: get_lang(object), datatype: get_curie(object.datatype), inlist: inlist}.compact}&lt;!= get_value(object)
            - else
              %li{**{property: get_curie(predicate), content: get_content(object), lang: get_lang(object), datatype: get_dt_curie(object), inlist: inlist}.compact}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="HAML_TEMPLATES-constant" class="">HAML_TEMPLATES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='label'>base:</span> <span class='const'><span class='object_link'><a href="#BASE_HAML-constant" title="RDF::RDFa::Writer::BASE_HAML (constant)">BASE_HAML</a></span></span><span class='comma'>,</span> <span class='label'>min:</span> <span class='const'><span class='object_link'><a href="#MIN_HAML-constant" title="RDF::RDFa::Writer::MIN_HAML (constant)">MIN_HAML</a></span></span><span class='comma'>,</span> <span class='label'>distiller:</span> <span class='const'><span class='object_link'><a href="#DISTILLER_HAML-constant" title="RDF::RDFa::Writer::DISTILLER_HAML (constant)">DISTILLER_HAML</a></span></span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="DEFAULT_HAML-constant" class="">DEFAULT_HAML =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#BASE_HAML-constant" title="RDF::RDFa::Writer::BASE_HAML (constant)">BASE_HAML</a></span></span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_uri-instance_method" title="#base_uri (instance method)">#<strong>base_uri</strong>  &#x21d2; RDF::URI </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Base URI used for relativizing URIs.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#graph-instance_method" title="#graph (instance method)">#<strong>graph</strong>  &#x21d2; Graph </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Graph of statements serialized.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#heading_predicates-instance_method" title="#heading_predicates (instance method)">#<strong>heading_predicates</strong>  &#x21d2; Array&lt;URI&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines order of predicates to use in heading.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#predicate_order-instance_method" title="#predicate_order (instance method)">#<strong>predicate_order</strong>  &#x21d2; Array&lt;URI&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines order of predicates to to emit at begninning of a resource description.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#top_classes-instance_method" title="#top_classes (instance method)">#<strong>top_classes</strong>  &#x21d2; Array&lt;URI&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-class_method" title="options (class method)">.<strong>options</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RDFa Writer options.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_content-instance_method" title="#get_content (instance method)">#<strong>get_content</strong>(literal)  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Haml rendering helper.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_curie-instance_method" title="#get_curie (instance method)">#<strong>get_curie</strong>(resource)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Haml rendering helper.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_dt_curie-instance_method" title="#get_dt_curie (instance method)">#<strong>get_dt_curie</strong>(literal)  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Haml rendering helper.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_lang-instance_method" title="#get_lang (instance method)">#<strong>get_lang</strong>(literal)  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Haml rendering helper.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_predicate_name-instance_method" title="#get_predicate_name (instance method)">#<strong>get_predicate_name</strong>(resource)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Haml rendering helper.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_value-instance_method" title="#get_value (instance method)">#<strong>get_value</strong>(literal)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Haml rendering helper.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#haml_template-instance_method" title="#haml_template (instance method)">#<strong>haml_template</strong>  &#x21d2; Hash&lt;Symbol =&gt; String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(output = $stdout, **options) {|writer| ... } &#x21d2; Writer </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the RDFa writer instance.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#order_properties-instance_method" title="#order_properties (instance method)">#<strong>order_properties</strong>(properties)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Take a hash from predicate uris to lists of values.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#order_subjects-instance_method" title="#order_subjects (instance method)">#<strong>order_subjects</strong>  &#x21d2; Array&lt;Resource&gt; </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Order subjects for output.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#predicate-instance_method" title="#predicate (instance method)">#<strong>predicate</strong>(predicate, objects)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write a predicate with one or more values.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#preprocess-instance_method" title="#preprocess (instance method)">#<strong>preprocess</strong>  &#x21d2; ignored </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform any preprocessing of statements required.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#preprocess_statement-instance_method" title="#preprocess_statement (instance method)">#<strong>preprocess_statement</strong>(statement)  &#x21d2; ignored </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform any statement preprocessing required.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#properties_for_subject-instance_method" title="#properties_for_subject (instance method)">#<strong>properties_for_subject</strong>(subject)  &#x21d2; Hash{String =&gt; Object} </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_document-instance_method" title="#render_document (instance method)">#<strong>render_document</strong>(subjects, **options) {|subject| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Render document using <code>haml_template[:doc]</code>.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_property-instance_method" title="#render_property (instance method)">#<strong>render_property</strong>(predicate, objects, **options) {|object, inlist| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Render a single- or multi-valued predicate using <code>haml_template[:property_value]</code> or <code>haml_template[:property_values]</code>.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_subject-instance_method" title="#render_subject (instance method)">#<strong>render_subject</strong>(subject, predicates, **options) {|predicate| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Render a subject using <code>haml_template[:subject]</code>.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_subject_template-instance_method" title="#render_subject_template (instance method)">#<strong>render_subject_template</strong>(subject, prop_list, **render_opts)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reset parser to run again.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#subject-instance_method" title="#subject (instance method)">#<strong>subject</strong>(subject, **options)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display a subject.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#type_of-instance_method" title="#type_of (instance method)">#<strong>type_of</strong>(type, subject)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>String representation of the specific RDF.type uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_epilogue-instance_method" title="#write_epilogue (instance method)">#<strong>write_epilogue</strong>  </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Outputs the XHTML+RDFa representation of all stored triples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_triple-instance_method" title="#write_triple (instance method)">#<strong>write_triple</strong>(subject, predicate, object)  </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Addes a triple to be serialized.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(output = $stdout, **options) {|writer| ... } &#x21d2; <tt><span class='object_link'><a href="" title="RDF::RDFa::Writer (class)">Writer</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes the RDFa writer instance.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>output</span>
      
      
        <span class='type'>(<tt>IO</tt>, <tt>File</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$stdout</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the output stream</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>any additional options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:canonicalize</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>whether to canonicalize literals when serializing</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:prefixes</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>Hash.new</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>the prefix mappings to use</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:base_uri</span>
          <span class="type">(<tt>#to_s</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>the base URI to use when constructing relative URIs, set as html&gt;head&gt;base.href</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:validate</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>whether to validate terms when serializing</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:lang</span>
          <span class="type">(<tt>#to_s</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Output as root @lang attribute, and avoid generation <em>@lang</em> where possible</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:standard_prefixes</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Add standard prefixes to <em>prefixes</em>, if necessary.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:top_classes</span>
          <span class="type">(<tt>Array&lt;RDF::URI&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF::RDFS.Class]</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:predicate_order</span>
          <span class="type">(<tt>Array&lt;RDF::URI&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF.type</tt>, <tt>RDF::RDFS.label</tt>, <tt>RDF::Vocab::DC.title]</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Defines order of predicates to to emit at begninning of a resource description..</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:heading_predicates</span>
          <span class="type">(<tt>Array&lt;RDF::URI&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF::RDFS.label</tt>, <tt>RDF::Vocab::DC.title]</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Defines order of predicates to use in heading.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>Symbol</tt>, <tt>Hash{Symbol =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>}</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_HAML</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>HAML templates used for generating code</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:haml_options</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>HAML_OPTIONS</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Options to pass to Haml::Engine.new.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>writer</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>writer</span>
      
      
        <span class='type'>(<tt>RDF::Writer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='gvar'>$stdout</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>super</span> <span class='kw'>do</span>
    <span class='ivar'>@uri_to_term_or_curie</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@uri_to_prefix</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@top_classes</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:top_classes</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='const'>Class</span><span class='rbracket'>]</span>
    <span class='ivar'>@predicate_order</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:predicate_order</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://purl.org/dc/terms/title</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='ivar'>@heading_predicates</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:heading_predicates</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://purl.org/dc/terms/title</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='ivar'>@graph</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Graph</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="base_uri=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="base_uri-instance_method">
  
    #<strong>base_uri</strong>  &#x21d2; <tt>RDF::URI</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Base URI used for relativizing URIs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Base URI used for relativizing URIs</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_base_uri'>base_uri</span>
  <span class='ivar'>@base_uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="graph=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="graph-instance_method">
  
    #<strong>graph</strong>  &#x21d2; <tt>Graph</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Graph of statements serialized.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Graph</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Graph of statements serialized</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_graph'>graph</span>
  <span class='ivar'>@graph</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="heading_predicates-instance_method">
  
    #<strong>heading_predicates</strong>  &#x21d2; <tt>Array&lt;URI&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines order of predicates to use in heading.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;URI&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_heading_predicates'>heading_predicates</span>
  <span class='ivar'>@heading_predicates</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="predicate_order-instance_method">
  
    #<strong>predicate_order</strong>  &#x21d2; <tt>Array&lt;URI&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines order of predicates to to emit at begninning of a resource description. Defaults to <code>[rdf:type, rdfs:label, dc:title]</code></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;URI&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_predicate_order'>predicate_order</span>
  <span class='ivar'>@predicate_order</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="top_classes-instance_method">
  
    #<strong>top_classes</strong>  &#x21d2; <tt>Array&lt;URI&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;URI&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_top_classes'>top_classes</span>
  <span class='ivar'>@top_classes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="options-class_method">
  
    .<strong>options</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RDFa Writer options</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-rdf.github.io/rdf/RDF/Writer#options-class_method" target="_parent" title="https://ruby-rdf.github.io/rdf/RDF/Writer#options-class_method">https://ruby-rdf.github.io/rdf/RDF/Writer#options-class_method</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 79</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span>
  <span class='kw'>super</span> <span class='op'>+</span> <span class='lbracket'>[</span>
    <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>CLI</span><span class='op'>::</span><span class='const'>Option</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='label'>symbol:</span> <span class='symbol'>:lang</span><span class='comma'>,</span>
      <span class='label'>datatype:</span> <span class='const'><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></span><span class='comma'>,</span>
      <span class='label'>on:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--lang</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>description:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Output as root @lang attribute, and avoid generation _@lang_ where possible.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
  <span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_content-instance_method">
  
    #<strong>get_content</strong>(literal)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Haml rendering helper. Data to be added to a @content value, for specific datatypes</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt>RDF::Literal</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


623
624
625
626
627
628
629
630
631
632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 623</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_content'>get_content</span><span class='lparen'>(</span><span class='id identifier rubyid_literal'>literal</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_literal'>literal</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Date</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Time</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>DateTime</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Duration</span>
    <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span> <span class='kw'>then</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting content for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_curie-instance_method">
  
    #<strong>get_curie</strong>(resource)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Haml rendering helper. Return appropriate, term, CURIE or URI for the given resource.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt>RDF::Value</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>value to use to identify URI</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 667</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_resource'>resource</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>URI</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

      <span class='id identifier rubyid_curie'>curie</span> <span class='op'>=</span> <span class='kw'>case</span>
      <span class='kw'>when</span> <span class='ivar'>@uri_to_term_or_curie</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_curie(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>): uri_to_term_or_curie </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id identifier rubyid_uri'>uri</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='kw'>return</span> <span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id identifier rubyid_uri'>uri</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_base_uri'>base_uri</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_curie(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>): base_uri (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='ivar'>@vocabulary</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='ivar'>@vocabulary</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_curie(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>): vocabulary</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='ivar'>@vocabulary</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='ivar'>@uri_to_prefix</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_u'>u</span><span class='op'>|</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_curie(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>): uri_to_prefix</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='comment'># Use a defined prefix
</span>        <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='ivar'>@uri_to_prefix</span><span class='lbracket'>[</span><span class='id identifier rubyid_u'>u</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_prefix'>prefix</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_u'>u</span><span class='rparen'>)</span>  <span class='comment'># Define for output
</span>        <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:standard_prefixes</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vocab'>vocab</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Vocabulary</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_uri'>to_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_curie(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>): standard_prefixes</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_vocab'>vocab</span><span class='period'>.</span><span class='id identifier rubyid___name__'>__name__</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>::</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='id identifier rubyid_prefix'>prefix</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_vocab'>vocab</span><span class='period'>.</span><span class='id identifier rubyid_to_uri'>to_uri</span><span class='rparen'>)</span> <span class='comment'># Define for output
</span>        <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='id identifier rubyid_vocab'>vocab</span><span class='period'>.</span><span class='id identifier rubyid_to_uri'>to_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_curie(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>): none</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_uri'>uri</span>
      <span class='kw'>end</span>

      <span class='comment'>#log_debug {&quot;get_curie(#{resource}) =&gt; #{curie}&quot;}
</span>
      <span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id identifier rubyid_uri'>uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_curie'>curie</span>
    <span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid URI </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Node</span> <span class='kw'>then</span> <span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span> <span class='kw'>then</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting CURIE for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, which must be a resource</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_dt_curie-instance_method">
  
    #<strong>get_dt_curie</strong>(literal)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Haml rendering helper. Return CURIE for the literal datatype, if the literal is a typed literal.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


595
596
597
598
599
600
601
602</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 595</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_dt_curie'>get_dt_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_literal'>literal</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_datatype'>datatype</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_literal?'>literal?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_datatype?'>datatype?</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting datatype CURIE for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_lang-instance_method">
  
    #<strong>get_lang</strong>(literal)  &#x21d2; <tt>Symbol</tt><sup>?</sup>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Haml rendering helper. Return language for plain literal, if there is no language, or it is the same as the document, return nil</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt>RDF::Literal</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


609
610
611
612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 609</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_lang'>get_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_literal'>literal</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_language'>language</span> <span class='kw'>if</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_literal?'>literal?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_language'>language</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_language'>language</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>!=</span> <span class='ivar'>@lang</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting language for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_predicate_name-instance_method">
  
    #<strong>get_predicate_name</strong>(resource)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Haml rendering helper. Return an appropriate label for a resource.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655
656
657
658
659
660</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_predicate_name'>get_predicate_name</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>URI</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting predicate name for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, which must be a URI</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_value-instance_method">
  
    #<strong>get_value</strong>(literal)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Haml rendering helper. Display value for object, may be humanized into a non-canonical form</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt>RDF::Literal</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


639
640
641
642
643
644
645
646</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 639</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_value'>get_value</span><span class='lparen'>(</span><span class='id identifier rubyid_literal'>literal</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_humanize'>humanize</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_error'>log_error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting value for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_literal'>literal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="haml_template-instance_method">
  
    #<strong>haml_template</strong>  &#x21d2; <tt>Hash&lt;Symbol =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;Symbol =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_haml_template'>haml_template</span>
  <span class='kw'>return</span> <span class='ivar'>@haml_template</span> <span class='kw'>if</span> <span class='ivar'>@haml_template</span>
  <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></span>   <span class='kw'>then</span> <span class='const'><span class='object_link'><a href="#HAML_TEMPLATES-constant" title="RDF::RDFa::Writer::HAML_TEMPLATES (constant)">HAML_TEMPLATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#DEFAULT_HAML-constant" title="RDF::RDFa::Writer::DEFAULT_HAML (constant)">DEFAULT_HAML</a></span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>             <span class='kw'>then</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>                       <span class='const'><span class='object_link'><a href="#DEFAULT_HAML-constant" title="RDF::RDFa::Writer::DEFAULT_HAML (constant)">DEFAULT_HAML</a></span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order_properties-instance_method">
  
    #<strong>order_properties</strong>(properties)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Take a hash from predicate uris to lists of values. Sort the lists of values. Return a sorted list of properties.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span> =&gt; Array&lt;Resource&gt;}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A hash of Property to Resource mappings</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>] Ordered list of properties. Uses predicate_order.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 432</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order_properties'>order_properties</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
  <span class='comment'># Make sorted list of properties
</span>  <span class='id identifier rubyid_prop_list'>prop_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_predicate_order'>predicate_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prop'>prop</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='id identifier rubyid_prop'>prop</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_prop_list'>prop_list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_prop'>prop</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_properties'>properties</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prop'>prop</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_prop_list'>prop_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_prop'>prop</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_prop_list'>prop_list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_prop'>prop</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>order_properties: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prop_list'>prop_list</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_prop_list'>prop_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order_subjects-instance_method">
  
    #<strong>order_subjects</strong>  &#x21d2; <tt>Array&lt;Resource&gt;</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Order subjects for output. Override this to output subjects in another order.</p>

<p>Uses #top_classes and #base_uri.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Ordered list of subjects</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 395</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order_subjects'>order_subjects</span>
  <span class='id identifier rubyid_seen'>seen</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_subjects'>subjects</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># Start with base_uri
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_base_uri'>base_uri</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@subjects</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subjects'>subjects</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_base_uri'>base_uri</span>
    <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='comment'># Add distinguished classes
</span>  <span class='id identifier rubyid_top_classes'>top_classes</span><span class='period'>.</span>
  <span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_seen'>seen</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span>
  <span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_class_uri'>class_uri</span><span class='op'>|</span>
    <span class='id identifier rubyid_graph'>graph</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>predicate:</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='label'>object:</span> <span class='id identifier rubyid_class_uri'>class_uri</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_st'>st</span><span class='op'>|</span> <span class='id identifier rubyid_st'>st</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subject'>subject</span><span class='op'>|</span>
      <span class='comment'>#log_debug {&quot;order_subjects: #{subject.inspect}&quot;}
</span>      <span class='id identifier rubyid_subjects'>subjects</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_subject'>subject</span>
      <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_subject'>subject</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Sort subjects by resources over nodes, ref_counts and the subject URI itself
</span>  <span class='id identifier rubyid_recursable'>recursable</span> <span class='op'>=</span> <span class='ivar'>@subjects</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span>
    <span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_seen'>seen</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Node</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_ref_count'>ref_count</span><span class='lparen'>(</span><span class='id identifier rubyid_r'>r</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id identifier rubyid_sort'>sort</span>

  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>order_subjects: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_recursable'>recursable</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_subjects'>subjects</span> <span class='op'>+=</span> <span class='id identifier rubyid_recursable'>recursable</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="predicate-instance_method">
  
    #<strong>predicate</strong>(predicate, objects)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write a predicate with one or more values.</p>

<p>Values may be a combination of Literal and Resource (Node or URI).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Predicate to serialize</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>objects</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Objects to serialize</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579
580
581
582
583
584
585
586
587
588</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 577</span>

<span class='kw'>def</span> <span class='id identifier rubyid_predicate'>predicate</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_objects'>objects</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>predicate: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_predicate'>predicate</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, objects: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_objects'>objects</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>predicate: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_render_property'>render_property</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_objects'>objects</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='id identifier rubyid_inlist'>inlist</span><span class='op'>=</span><span class='kw'>nil</span><span class='op'>|</span>
    <span class='comment'># Yields each object, for potential recursive definition.
</span>    <span class='comment'># If nil is returned, a leaf is produced
</span>    <span class='id identifier rubyid_log_depth'>log_depth</span> <span class='lbrace'>{</span><span class='id identifier rubyid_subject'>subject</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='label'>rel:</span> <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>inlist:</span> <span class='id identifier rubyid_inlist'>inlist</span><span class='comma'>,</span> <span class='label'>element:</span> <span class='lparen'>(</span><span class='symbol'>:li</span> <span class='kw'>if</span> <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>||</span> <span class='id identifier rubyid_inlist'>inlist</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_done?'>is_done?</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@subjects</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preprocess-instance_method">
  
    #<strong>preprocess</strong>  &#x21d2; <tt>ignored</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Perform any preprocessing of statements required</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ignored</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preprocess'>preprocess</span>
  <span class='comment'># Load initial contexts
</span>  <span class='comment'># Add terms and prefixes to local store for converting URIs
</span>  <span class='comment'># Keep track of vocabulary from left-most context
</span>  <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../RDFa.html#XML_RDFA_CONTEXT-constant" title="RDF::RDFa::XML_RDFA_CONTEXT (constant)">XML_RDFA_CONTEXT</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../RDFa.html#HTML_RDFA_CONTEXT-constant" title="RDF::RDFa::HTML_RDFA_CONTEXT (constant)">HTML_RDFA_CONTEXT</a></span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_uri'>uri</span><span class='op'>|</span>
    <span class='id identifier rubyid_ctx'>ctx</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Context.html" title="RDF::RDFa::Context (class)">Context</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_prefixes'>prefixes</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='ivar'>@uri_to_prefix</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span> <span class='kw'>unless</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dcterms</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_terms'>terms</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>end</span>

    <span class='ivar'>@vocabulary</span> <span class='op'>=</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_vocabulary'>vocabulary</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_vocabulary'>vocabulary</span>
  <span class='kw'>end</span>

  <span class='comment'># Load defined prefixes
</span>  <span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='ivar'>@uri_to_prefix</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span>
  <span class='kw'>end</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>  <span class='comment'># Will define actual used when matched
</span>
  <span class='comment'># Process each statement to establish CURIEs and Terms
</span>  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_statement'>statement</span><span class='op'>|</span> <span class='id identifier rubyid_preprocess_statement'>preprocess_statement</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preprocess_statement-instance_method">
  
    #<strong>preprocess_statement</strong>(statement)  &#x21d2; <tt>ignored</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Perform any statement preprocessing required. This is used to perform reference counts and determine required prefixes.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>statement</span>
      
      
        <span class='type'>(<tt>RDF::Statement</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ignored</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


453
454
455
456
457
458
459
460
461</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 453</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preprocess_statement'>preprocess_statement</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='rparen'>)</span>
  <span class='comment'>#log_debug {&quot;preprocess: #{statement.inspect}&quot;}
</span>  <span class='id identifier rubyid_bump_reference'>bump_reference</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='ivar'>@subjects</span><span class='lbracket'>[</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_predicate'>predicate</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_datatype'>datatype</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_literal?'>literal?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_has_datatype?'>has_datatype?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="properties_for_subject-instance_method">
  
    #<strong>properties_for_subject</strong>(subject)  &#x21d2; <tt>Hash{<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span> =&gt; Object}</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span> =&gt; Object}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


511
512
513
514
515
516
517
518
519</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 511</span>

<span class='kw'>def</span> <span class='id identifier rubyid_properties_for_subject'>properties_for_subject</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>subject:</span> <span class='id identifier rubyid_subject'>subject</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_st'>st</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_st'>st</span><span class='period'>.</span><span class='id identifier rubyid_predicate'>predicate</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
    <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_st'>st</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_properties'>properties</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_document-instance_method">
  
    #<strong>render_document</strong>(subjects, **options) {|subject| ... } &#x21d2; <tt>Object</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Render document using <code>haml_template[:doc]</code>. Yields each subject to be rendered separately.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subjects</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Ordered list of subjects. Template must yield to each subject, which returns the serialization of that subject (@see #subject_template)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rendering options passed to Haml render.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">base</span>
          <span class="type">(<tt>RDF::URI</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Base URI added to document, used for shortening URIs within the document.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">language</span>
          <span class="type">(<tt>Symbol</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Value of @lang attribute in document, also allows included literals to omit an @lang attribute if it is equivalent to that of the document.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">title</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Value of html&gt;head&gt;title element.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">prefix</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Value of @prefix attribute.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:doc]</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Haml template to render.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#subject-instance_method" title="RDF::RDFa::Writer#subject (method)">subject</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Yields each subject</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>:ignored</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>String The rendered document is returned as a string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_document'>render_document</span><span class='lparen'>(</span><span class='id identifier rubyid_subjects'>subjects</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:doc</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>prefix:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>subjects:</span> <span class='id identifier rubyid_subjects'>subjects</span><span class='comma'>,</span>
    <span class='label'>title:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hamlify'>hamlify</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subject'>subject</span><span class='op'>|</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s+$</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_property-instance_method">
  
    #<strong>render_property</strong>(predicate, objects, **options) {|object, inlist| ... } &#x21d2; <tt>Object</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Render a single- or multi-valued predicate using <code>haml_template[:property_value]</code> or <code>haml_template[:property_values]</code>. Yields each object for optional rendering. The block should only render for recursive subject definitions (i.e., where the object is also a subject and is rendered underneath the first referencing subject).</p>

<p>If a multi-valued property definition is not found within the template, the writer will use the single-valued property definition multiple times.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Predicate to render.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>objects</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>List of objects to render. If the list contains only a single element, the :property_value template will be used. Otherwise, the :property_values template is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rendering options passed to Haml render.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:property_value]</tt>, <tt>haml_template[:property_values]</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Haml template to render. Otherwise, uses <code>haml_template[:property_value] or haml_template[:property_values]</code> depending on the cardinality of objects.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>object, inlist Yields object and if it is contained in a list.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>inlist</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The block should only return a string for recursive object definitions.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>String The rendered document is returned as a string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 306</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_property'>render_property</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_objects'>objects</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>render_property(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_predicate'>predicate</span><span class='embexpr_end'>}</span><span class='tstring_content'>): </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
  <span class='comment'># If there are multiple objects, and no :property_values is defined, call recursively with
</span>  <span class='comment'># each object
</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>||=</span> <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='id identifier rubyid_haml_template'>haml_template</span><span class='lbracket'>[</span><span class='symbol'>:property_values</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_haml_template'>haml_template</span><span class='lbracket'>[</span><span class='symbol'>:property_value</span><span class='rbracket'>]</span>

  <span class='comment'># Separate out the objects which are lists and render separately
</span>  <span class='id identifier rubyid_list_objects'>list_objects</span> <span class='op'>=</span> <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
    <span class='id identifier rubyid_o'>o</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nil'>nil</span> <span class='op'>||</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>List</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>subject:</span> <span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='label'>graph:</span> <span class='ivar'>@graph</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_invalid?'>invalid?</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_list_objects'>list_objects</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='comment'># Render non-list objects
</span>    <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>properties with lists: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_list_objects'>list_objects</span><span class='embexpr_end'>}</span><span class='tstring_content'> non-lists: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_objects'>objects</span> <span class='op'>-</span> <span class='id identifier rubyid_list_objects'>list_objects</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_nl'>nl</span> <span class='op'>=</span> <span class='id identifier rubyid_log_depth'>log_depth</span> <span class='lbrace'>{</span><span class='id identifier rubyid_render_property'>render_property</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_objects'>objects</span> <span class='op'>-</span> <span class='id identifier rubyid_list_objects'>list_objects</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_objects'>objects</span> <span class='op'>==</span> <span class='id identifier rubyid_list_objects'>list_objects</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_nl'>nl</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='id identifier rubyid_list_objects'>list_objects</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_object'>object</span><span class='op'>|</span>
      <span class='comment'># Render each list as multiple properties and set :inlist to true
</span>      <span class='id identifier rubyid_list'>list</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>List</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>subject:</span> <span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='label'>graph:</span> <span class='ivar'>@graph</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each_statement'>each_statement</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_st'>st</span><span class='op'>|</span> <span class='id identifier rubyid_subject_done'>subject_done</span><span class='lparen'>(</span><span class='id identifier rubyid_st'>st</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span><span class='rbrace'>}</span>

      <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>list: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_log_depth'>log_depth</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_render_property'>render_property</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>inlist:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_object'>object</span><span class='op'>|</span>
          <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># If there is no property_values template, render each property using property_value template
</span>    <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_object'>object</span><span class='op'>|</span>
      <span class='id identifier rubyid_log_depth'>log_depth</span> <span class='lbrace'>{</span><span class='id identifier rubyid_render_property'>render_property</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_object'>object</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log_fatal'>log_fatal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing property template</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>WriterError</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span>
      <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_haml_template'>haml_template</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='symbol'>:property_values</span><span class='rparen'>)</span> <span class='op'>?</span>
        <span class='symbol'>:property_values</span> <span class='op'>:</span>
        <span class='symbol'>:property_value</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>objects:</span>    <span class='id identifier rubyid_objects'>objects</span><span class='comma'>,</span>
      <span class='label'>object:</span>     <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span>
      <span class='label'>predicate:</span>  <span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span>
      <span class='label'>property:</span>   <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>rel:</span>        <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>inlist:</span>     <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hamlify'>hamlify</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_subject-instance_method">
  
    #<strong>render_subject</strong>(subject, predicates, **options) {|predicate| ... } &#x21d2; <tt>Object</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Render a subject using <code>haml_template[:subject]</code>.</p>

<p>The <em>subject</em> template may be called either as a top-level element, or recursively under another element if the <em>rel</em> local is not nil.</p>

<p>Yields each predicate/property to be rendered separately (@see #render_property_value and <code>#render_property_values</code>).</p>

<p>Return Haml template for document from <code>haml_template[:subject]</code></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Subject to render</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>predicates</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Predicates of subject. Each property is yielded for separate rendering.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Rendering options passed to Haml render.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">about</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>About description, a CURIE, URI or Node definition. May be nil if no @about is rendered (e.g. unreferenced Nodes)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">resource</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Resource description, a CURIE, URI or Node definition. May be nil if no @resource is rendered</p>
</div>
          
        </li>
      
        <li>
          <span class="name">rel</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Optional @rel property description, a CURIE, URI or Node definition.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">typeof</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>RDF type as a CURIE, URI or Node definition. If :about is nil, this defaults to the empty string ().</p>
</div>
          
        </li>
      
        <li>
          <span class="name">element</span>
          <span class="type">(<tt>:li</tt>, <tt>nil</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Render with &lt;li&gt;, otherwise with template default.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:subject]</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Haml template to render.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#predicate-instance_method" title="RDF::RDFa::Writer#predicate (method)">predicate</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Yields each predicate</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>:ignored</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>String The rendered document is returned as a string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_subject'>render_subject</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='id identifier rubyid_predicates'>predicates</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:subject</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>about:</span>      <span class='lparen'>(</span><span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:rel</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>base:</span>       <span class='id identifier rubyid_base_uri'>base_uri</span><span class='comma'>,</span>
    <span class='label'>element:</span>    <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>predicates:</span> <span class='id identifier rubyid_predicates'>predicates</span><span class='comma'>,</span>
    <span class='label'>rel:</span>        <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>inlist:</span>     <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>resource:</span>   <span class='lparen'>(</span><span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:rel</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>subject:</span>    <span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span>
    <span class='label'>typeof:</span>     <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hamlify'>hamlify</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_predicate'>predicate</span><span class='op'>|</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_predicate'>predicate</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_subject_template-instance_method">
  
    #<strong>render_subject_template</strong>(subject, prop_list, **render_opts)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>prop_list</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>render_opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 548</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_subject_template'>render_subject_template</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='id identifier rubyid_prop_list'>prop_list</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_render_opts'>render_opts</span><span class='rparen'>)</span>
  <span class='comment'># See if there&#39;s a template based on the sorted concatenation of all types of this subject
</span>  <span class='comment'># or any type of this subject
</span>  <span class='id identifier rubyid_tmpl'>tmpl</span> <span class='op'>=</span> <span class='id identifier rubyid_find_template'>find_template</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subject: found template </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tmpl'>tmpl</span><span class='lbracket'>[</span><span class='symbol'>:identifier</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_tmpl'>tmpl</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_tmpl'>tmpl</span>

  <span class='comment'># Render this subject
</span>  <span class='comment'># If :rel is specified and :typeof is nil, use @resource instead of @about.
</span>  <span class='comment'># Pass other options from calling context
</span>  <span class='id identifier rubyid_with_template'>with_template</span><span class='lparen'>(</span><span class='id identifier rubyid_tmpl'>tmpl</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_render_subject'>render_subject</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='id identifier rubyid_prop_list'>prop_list</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_render_opts'>render_opts</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pred'>pred</span><span class='op'>|</span>
      <span class='id identifier rubyid_log_depth'>log_depth</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_pred'>pred</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='id identifier rubyid_pred'>pred</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_pred'>pred</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_render_opts'>render_opts</span><span class='lbracket'>[</span><span class='symbol'>:property_values</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_pred'>pred</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subject: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, pred: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_pred'>pred</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, values: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_predicate'>predicate</span><span class='lparen'>(</span><span class='id identifier rubyid_pred'>pred</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset-instance_method">
  
    #<strong>reset</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reset parser to run again</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


464
465
466
467
468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 464</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset'>reset</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:log_depth</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_prefixes'>prefixes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@references</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@serialized</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@subjects</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="subject-instance_method">
  
    #<strong>subject</strong>(subject, **options)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display a subject.</p>

<p>If the Haml template contains an entry matching the subjects rdf:type URI, that entry will be used as the template for this subject and its properties.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Displays a subject as a Resource Definition:</p>
</div></p>
      
      <pre class="example code"><code>&lt;div typeof=&quot;rdfs:Resource&quot; about=&quot;http://example.com/resource&quot;&gt;
  &lt;h1 property=&quot;dc:title&quot;&gt;label&lt;/h1&gt;
  &lt;ul&gt;
    &lt;li content=&quot;2009-04-30T06:15:51Z&quot; property=&quot;dc:created&quot;&gt;2009-04-30T06:15:51+00:00&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:element(:div)</span>
          <span class="type">(<tt>:li</tt>, <tt>nil</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Serialize using &lt;li&gt; rather than template default element</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:rel</span>
          <span class="type">(<tt>RDF::Resource</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>Optional @rel property</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


493
494
495
496
497
498
499
500
501
502
503
504
505
506
507</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 493</span>

<span class='kw'>def</span> <span class='id identifier rubyid_subject'>subject</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_done?'>is_done?</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_subject_done'>subject_done</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='id identifier rubyid_properties_for_subject'>properties_for_subject</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_typeof'>typeof</span> <span class='op'>=</span> <span class='id identifier rubyid_type_of'>type_of</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_prop_list'>prop_list</span> <span class='op'>=</span> <span class='id identifier rubyid_order_properties'>order_properties</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>props: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prop_list'>prop_list</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_render_opts'>render_opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>typeof:</span> <span class='id identifier rubyid_typeof'>typeof</span><span class='comma'>,</span> <span class='label'>property_values:</span> <span class='id identifier rubyid_properties'>properties</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_render_subject_template'>render_subject_template</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='id identifier rubyid_prop_list'>prop_list</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_render_opts'>render_opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type_of-instance_method">
  
    #<strong>type_of</strong>(type, subject)  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns string representation of the specific RDF.type uri.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Array</tt>, <tt>NilClass</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>string representation of the specific RDF.type uri</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 524</span>

<span class='kw'>def</span> <span class='id identifier rubyid_type_of'>type_of</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='comment'># Find appropriate template
</span>  <span class='id identifier rubyid_curie'>curie</span> <span class='op'>=</span> <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_subject'>subject</span><span class='period'>.</span><span class='id identifier rubyid_node?'>node?</span>
    <span class='id identifier rubyid_subject'>subject</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_ref_count'>ref_count</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>1</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_typeof'>typeof</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_get_curie'>get_curie</span><span class='lparen'>(</span><span class='id identifier rubyid_r'>r</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_typeof'>typeof</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_typeof'>typeof</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='comment'># Nodes without a curie need a blank @typeof to generate a subject
</span>  <span class='id identifier rubyid_typeof'>typeof</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_curie'>curie</span>

  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subject: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_curie'>curie</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, typeof: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_typeof'>typeof</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_typeof'>typeof</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_epilogue-instance_method">
  
    #<strong>write_epilogue</strong>  
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Outputs the XHTML+RDFa representation of all stored triples.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_epilogue'>write_epilogue</span>
  <span class='ivar'>@base_uri</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:base_uri</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:base_uri</span><span class='rbracket'>]</span>
  <span class='ivar'>@lang</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:lang</span><span class='rbracket'>]</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>

  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nserialize: graph size: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_preprocess'>preprocess</span>

  <span class='comment'># Prefixes
</span>  <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_prefixes'>prefixes</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pk'>pk</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pk'>pk</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefixes'>prefixes</span><span class='lbracket'>[</span><span class='id identifier rubyid_pk'>pk</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_prefixes'>prefixes</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_log_debug'>log_debug</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nserialize: prefixes: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_subjects'>subjects</span> <span class='op'>=</span> <span class='id identifier rubyid_order_subjects'>order_subjects</span>

  <span class='comment'># Take title from first subject having a heading predicate
</span>  <span class='id identifier rubyid_doc_title'>doc_title</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_titles'>titles</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_heading_predicates'>heading_predicates</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pred'>pred</span><span class='op'>|</span>
    <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>predicate:</span> <span class='id identifier rubyid_pred'>pred</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_statement'>statement</span><span class='op'>|</span>
      <span class='id identifier rubyid_titles'>titles</span><span class='lbracket'>[</span><span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_statement'>statement</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_title_subject'>title_subject</span> <span class='op'>=</span> <span class='id identifier rubyid_subjects'>subjects</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_subject'>subject</span><span class='op'>|</span> <span class='id identifier rubyid_titles'>titles</span><span class='lbracket'>[</span><span class='id identifier rubyid_subject'>subject</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_doc_title'>doc_title</span> <span class='op'>=</span> <span class='id identifier rubyid_titles'>titles</span><span class='lbracket'>[</span><span class='id identifier rubyid_title_subject'>title_subject</span><span class='rbracket'>]</span>

  <span class='comment'># Generate document
</span>  <span class='id identifier rubyid_doc'>doc</span> <span class='op'>=</span> <span class='id identifier rubyid_render_document'>render_document</span><span class='lparen'>(</span><span class='id identifier rubyid_subjects'>subjects</span><span class='comma'>,</span>
    <span class='label'>lang:</span>     <span class='ivar'>@lang</span><span class='comma'>,</span>
    <span class='label'>base:</span>     <span class='id identifier rubyid_base_uri'>base_uri</span><span class='comma'>,</span>
    <span class='label'>title:</span>    <span class='id identifier rubyid_doc_title'>doc_title</span><span class='comma'>,</span>
    <span class='label'>prefix:</span>   <span class='id identifier rubyid_prefix'>prefix</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_subject'>subject</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@output</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>

  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_triple-instance_method">
  
    #<strong>write_triple</strong>(subject, predicate, object)  
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'></div>
</div>
<p class="note returns_void">This method returns an undefined value.</p>
<p>Addes a triple to be serialized</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt>RDF::Value</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>unless implemented in subclass</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if validating and attempting to write an invalid Term.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_triple'>write_triple</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span><span class='op'>::</span><span class='const'>Statement</span><span class='lparen'>(</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='id identifier rubyid_predicate'>predicate</span><span class='comma'>,</span> <span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jul 23 20:43:14 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.1.4).
</div>

    </div>
  </body>
</html>